<ion-header [translucent]="true" color="cream" class="ion-no-border h-[100px]">
  <ion-toolbar color="cream" class="!pt-[30px] h-[100px]">
    <ion-title mode="md" class="text-dark2 font-semibold text-[20px]">Agrega tu Incidencia</ion-title>
    <ion-buttons slot="end" (click)="closeMenu()">
      <ion-button class="p-2 rounded-full flex items-center bg-white justify-center h-[54px] w-[54px]">
        <ion-icon size="large" name="close" class="text-black"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div *ngIf="imageUrl !== ''" class="w-full bg-[#f6f8fc] rounded-[32px] p-6  shadow-lg hover:shadow-2xl transition">
  
    <div class="w-full flex justify-between items-baseline">
      <p class="font-semibold text-[30px]">Tu Fotografia</p>
      
      <ion-buttons slot="end" (click)="removeImage()">
        <ion-button class="p-2 rounded-full flex items-center bg-[#f04141] justify-center h-[54px] w-[54px]">
          <ion-icon size="large" name="trash" class="text-white"></ion-icon>
        </ion-button>
      </ion-buttons>
      
    </div>

    <div>
      <img [src]="imageUrl"  class="rounded-[32px] w-full"/>
    </div>

  </div>
  <br>
  <div *ngIf="audioUrl !== ''" class="w-full bg-[#f6f8fc] rounded-[32px] p-6  shadow-lg hover:shadow-2xl transition">
  
    <div class="w-full flex justify-between items-baseline">
      <p class="font-semibold text-[30px]">Tu Grabacion</p>
      
      <ion-buttons slot="end" (click)="removeAudio()">
        <ion-button class="p-2 rounded-full flex items-center bg-[#f04141] justify-center h-[54px] w-[54px]">
          <ion-icon size="large" name="trash" class="text-white"></ion-icon>
        </ion-button>
      </ion-buttons>
      
    </div>
    <br><br>
    <audio style="width: 100% !important;" controls   controlsList="nodownload">
      <source [src]="audioUrl">
    </audio>
  
  </div>
  
  <div *ngIf="boxAudio === true">
    <p class="font-semibold text-[30px]">Graba tu Audio</p>
    <div class="w-full bg-[#f6f8fc] text-black rounded-lg shadow-lg p-4 flex items-center gap-4">
      <div class="flex-1">
        <p class="text-sm">{{ isRecording ? 'Iniciado...' : 'Presiona iniciar para grabar' }}</p>
        <p class="text-xs text-gray-400">{{ formatTime(duration) }}</p>
      </div>
    
      <div class="flex gap-1">
        <button
          (click)="toggleRecording()"
          class="px-3 py-1 text-xs text-white font-semibold rounded-lg transition"
          [ngClass]="{
            'bg-red-600 hover:bg-red-700': !isRecording,
            'bg-black': isRecording
          }"
        >
          {{ isRecording ? 'Detener' : 'Iniciar' }}
        </button>
      </div>
    </div>
  </div>
  <br>


  <div  class="flex gap-[5px] w-full">
    <div  class="w-[50%]">
      <div class="h-full w-full bg-white rounded-[32px] p-4  shadow-lg hover:shadow-2xl transition" (click)="activateBoxAudio()">
        <div class="h-full w-full flex flex-col items-center justify-center gap-2">
          <ion-icon name="mic-circle" class="text-dark2 !text-[30px]"></ion-icon>
          <p class="font-semibold text-dark2 text-center m-0">Audio</p>
        </div>
        
      </div>
    </div>


    <div  class="w-[50%]">
      <div class="h-full w-full bg-white rounded-[32px] p-4  shadow-lg hover:shadow-2xl transition" (click)="pickImage()">
        <div class="h-full w-full flex flex-col items-center justify-center gap-2">
          <ion-icon name="camera"  class="text-dark2 !text-[30px]"></ion-icon>
          <p class="font-semibold text-dark2 text-center m-0">Camara</p>
        </div>
        
      </div>
    </div>
  </div>
  <br>
  <div class="mb-4">
    <label  class="block text-dark2 font-semibold mb-2">Titulo</label>
    <input
      [(ngModel)]="title"
      type="text"
      placeholder="Ingresa el Titulo"
      class="w-full px-4 py-3 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"
    />
  </div>

  <div class="mb-4">
    <label class="block text-dark2 font-semibold mb-2">Descripción</label>
    <textarea
      [(ngModel)]="description"
      placeholder="Ingresa la descripción"
      rows="4"
      class="w-full px-4 py-3 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent resize-none"
    ></textarea>
  </div>

  <div class="mb-4">
    <label  class="block text-dark2 font-semibold mb-2">Estado</label>
    <input
      [(ngModel)]="state"
      type="text"
      placeholder="Ingresa el Estado"
      class="w-full px-4 py-3 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"
    />
  </div>


  <div class="mb-4">
    <label  class="block text-dark2 font-semibold mb-2">Municipio</label>
    <input
      [(ngModel)]="town"
      type="text"
      placeholder="Ingresa el Municipio"
      class="w-full px-4 py-3 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"
    />
  </div>

  <div class="mb-4">
    <label  class="block text-dark2 font-semibold mb-2">Colonia</label>
    <input
      [(ngModel)]="colony"
      type="text"
      placeholder="Ingresa el Colonia"
      class="w-full px-4 py-3 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"
    />
  </div>

  <div>
    <ion-select
      label="Tipo de Evidencia"
      label-placement="floating"
      fill="outline"
      mode="md"
      [(ngModel)]="evidenceTypeSelect"
    >
      <ion-select-option [value]="data" *ngFor="let data of evidenceType">
        {{ data?.name | uppercase }}
      </ion-select-option>
    </ion-select>
  </div>
  <br>
  <ion-button expand="block" color="dark2" (click)="send()">Guardar</ion-button>
  

  <br><br><br><br>
</ion-content>

<!--
<ion-footer [translucent]="false" color="cream" class="ion-no-border">
  <ion-toolbar color="cream">
    <ion-button expand="block" color="dark2" (click)="send()">Guardar</ion-button>
  </ion-toolbar>
</ion-footer>
-->
